{"version":3,"sources":["webpack:///webpack/bootstrap c1e9022526046484dd19","webpack:///./src/recorder/client/index.js","webpack:///./src/recorder/client/send-queue.js","webpack:///./src/utils/ajax.js","webpack:///./src/utils/queue.js"],"names":["queue","eventListeners","map","document","addEventListener","eventListener","enqueue","event","timestamp","Date","now","console","log","htmlElementsArray","getElementsByTagName","window","onload","body","innerHTML","setInterval","getLength","dequeue","postQueue","res","methods","sendAjaxRequest","method","url","cb","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","DONE","status","responseText","send","JSON","stringify","x","screenX","y","screenY","Queue","offset","length","isEmpty","push","item","undefined","slice","peek","clear"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;ACtCA;;;;AACA;;;;;;AAEA,KAAMA,QAAQ,qBAAd;AACA,KAAMC,iBAAiB,CAAC,OAAD,EAAU,OAAV,CAAvB;;AAEAA,gBAAeC,GAAf,CAAmB,yBAAiB;AAClCC,YAASC,gBAAT,CAA0BC,aAA1B,EAAyC,iBAAS;AAChDL,WAAMM,OAAN,CAAc,EAACC,OAAOA,KAAR,EAAeC,WAAWC,KAAKC,GAAL,EAA1B,EAAd;AACAC,aAAQC,GAAR,CAAY,OAAZ,EAAqBL,KAArB;AACD,IAHD;AAID,EALD;;AAOA,KAAMM,oBAAoBV,SAASW,oBAAT,CAA8B,GAA9B,CAA1B;AACAH,SAAQC,GAAR,CAAYC,iBAAZ;AACAE,QAAOC,MAAP,GAAgB,YAAM;AACpB,OAAMC,OAAOd,SAASc,IAAT,CAAcC,SAA3B;AACAP,WAAQC,GAAR,CAAYK,IAAZ;AACD,EAHD;;AAKAE,aAAY,YAAM;AAChB,OAAInB,MAAMoB,SAAN,MAAqB,CAAzB,EAA4B;AAC1B,8BAAUpB,MAAMqB,OAAN,EAAV;AACD;AACF,EAJD,EAIG,IAJH;;AAMA;AACA;AACA;AACA,M;;;;;;;;;;;;ACxBA;;;;;;AAEA,KAAMC,YAAY,SAAZA,SAAY,QAAS;AACzB,uBAAgB,MAAhB,EAAwB,iCAAxB,EAA2DtB,KAA3D,EAAkE,eAAO;AACvEW,aAAQC,GAAR,CAAY,qBAAZ,EAAmCW,GAAnC;AACD,IAFD;AAGD,EAJD,C,CAPA;AACA;AACA;AACA;AACA;mBASeD,S;;;;;;;;;;;ACbf,KAAME,UAAU,CAAC,KAAD,EAAQ,MAAR,EAAgB,MAAhB,EAAwB,KAAxB,EAA+B,QAA/B,EAAyC,SAAzC,EAAoD,SAApD,EAA+D,OAA/D,CAAhB;;AAEA,KAAMC,kBAAkB,SAAlBA,eAAkB,CAACC,MAAD,EAASC,GAAT,EAAcV,IAAd,EAAoBW,EAApB,EAA2B;AACjDjB,WAAQC,GAAR,CAAY,eAAZ,EAA6BK,IAA7B;AACA,OAAMY,MAAM,IAAIC,cAAJ,EAAZ;;AAEAD,OAAIE,IAAJ,CAASL,MAAT,EAAiBC,GAAjB,EAAsB,IAAtB;AACAE,OAAIG,gBAAJ,CAAqB,cAArB,EAAqC,gCAArC;AACAH,OAAII,kBAAJ,GAAyB,YAAM;AAC7B,SAAIJ,IAAIK,UAAJ,KAAmBJ,eAAeK,IAAtC,EAA4C;AAC1C,WAAIN,IAAIK,UAAJ,IAAkB,CAAlB,IAAuBL,IAAIO,MAAJ,IAAc,GAAzC,EAA8C;AAC5CR,YAAGC,IAAIQ,YAAP;AACD;AACF;AACF,IAND;;AAQAR,OAAIS,IAAJ,CAASC,KAAKC,SAAL,CAAe;AACtBC,QAAGxB,KAAKyB,OADc;AAEtBC,QAAG1B,KAAK2B;AAFc,IAAf,CAAT;AAID,EAlBD;;mBAoBenB,e;;;;;;ACtBf;;;;;mBAEwBoB,K;AAAT,UAASA,KAAT,GAAiB;;AAE9B,OAAI7C,QAAS,EAAb;AACA,OAAI8C,SAAS,CAAb;;AAEA,QAAK1B,SAAL,GAAiB,YAAM;AACrB,YAAQpB,MAAM+C,MAAN,GAAeD,MAAvB;AACD,IAFD;;AAIA,QAAKE,OAAL,GAAe,YAAM;AACnB,YAAQhD,MAAM+C,MAAN,IAAgB,CAAxB;AACD,IAFD;;AAIA,QAAKzC,OAAL,GAAe,gBAAQ;AACrBN,WAAMiD,IAAN,CAAWC,IAAX;AACD,IAFD;;AAIA,QAAK7B,OAAL,GAAe,YAAM;AACnB,SAAIrB,MAAM+C,MAAN,IAAgB,CAApB,EAAuB,OAAOI,SAAP;;AAEvB,SAAMD,OAAOlD,MAAM8C,MAAN,CAAb;;AAEA,SAAI,EAAGA,MAAH,GAAY,CAAZ,IAAiB9C,MAAM+C,MAA3B,EAAmC;AACjC/C,eAASA,MAAMoD,KAAN,CAAYN,MAAZ,CAAT;AACAA,gBAAS,CAAT;AACD;;AAED,YAAOI,IAAP;AACD,IAXD;;AAaA,QAAKG,IAAL,GAAY,YAAM;AAChB,YAAQrD,MAAM+C,MAAN,GAAe,CAAf,GAAmB/C,MAAM8C,MAAN,CAAnB,GAAmCK,SAA3C;AACD,IAFD;;AAIA,QAAKG,KAAL,GAAa,YAAM;AACjB,SAAItD,MAAM+C,MAAN,KAAiB,CAArB,EAAwB/C,QAAQ,EAAR;AACzB,IAFD;AAGD,G","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c1e9022526046484dd19","import postQueue from './send-queue'\nimport Queue from '../../utils/queue'\n\nconst queue = new Queue()\nconst eventListeners = ['keyup', 'click']\n\neventListeners.map(eventListener => {\n  document.addEventListener(eventListener, event => {\n    queue.enqueue({event: event, timestamp: Date.now()})\n    console.log('event', event)\n  })\n})\n\nconst htmlElementsArray = document.getElementsByTagName('*')\nconsole.log(htmlElementsArray)\nwindow.onload = () => {\n  const body = document.body.innerHTML\n  console.log(body)\n}\n\nsetInterval(() => { \n  if (queue.getLength() >= 1) {\n    postQueue(queue.dequeue())\n  }\n}, 5000)\n\n// should this be 'onbeforeunload'? would we still have access to DOM then?\n// window.onbeforeunload(event => {\n//   postQueue(queue)\n// })\n\n\n// WEBPACK FOOTER //\n// ./src/recorder/client/index.js","// POST queue to endpoint, \n// create new queue at same time as POST\n// keep old queue in memory on client until get successful call back\n// then delete the old queue\n// add retry logic in case it fails, then delete on success\nimport sendAjaxRequest from '../../utils/ajax'\n\nconst postQueue = queue => {\n  sendAjaxRequest('POST', 'http://localhost:3000/recording', queue, res => {\n    console.log('res from postQueue:', res)\n  })\n}\n\nexport default postQueue\n\n\n// WEBPACK FOOTER //\n// ./src/recorder/client/send-queue.js","const methods = ['GET', 'HEAD', 'POST', 'PUT', 'DELETE', 'CONNECT', 'OPTIONS', 'PATCH']\n\nconst sendAjaxRequest = (method, url, body, cb) => {\n  console.log('body from xhr', body)\n  const xhr = new XMLHttpRequest()\n\n  xhr.open(method, url, true)\n  xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')\n  xhr.onreadystatechange = () => {\n    if (xhr.readyState === XMLHttpRequest.DONE) {\n      if (xhr.readyState == 4 && xhr.status == 200) {\n        cb(xhr.responseText)\n      }\n    }\n  }\n\n  xhr.send(JSON.stringify({\n    x: body.screenX,\n    y: body.screenY\n  }))\n}\n\nexport default sendAjaxRequest\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ajax.js","'use strict';\n\nexport default function Queue() {\n\n  let queue  = [];\n  let offset = 0;\n\n  this.getLength = () => {\n    return (queue.length - offset);\n  }\n\n  this.isEmpty = () => {\n    return (queue.length == 0);\n  }\n\n  this.enqueue = item => {\n    queue.push(item);\n  }\n\n  this.dequeue = () => {\n    if (queue.length == 0) return undefined;\n\n    const item = queue[offset];\n\n    if (++ offset * 2 >= queue.length) {\n      queue  = queue.slice(offset);\n      offset = 0;\n    }\n\n    return item;\n  }\n\n  this.peek = () => {\n    return (queue.length > 0 ? queue[offset] : undefined);\n  }\n\n  this.clear = () => {\n    if (queue.length !== 0) queue = [];\n  }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils/queue.js"],"sourceRoot":""}